{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-av","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":42},"end":{"line":2,"column":32,"index":74}}],"key":"VxVG0TWBdB+Oc1qOQ32HKtN+H5M=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":75},"end":{"line":3,"column":47,"index":122}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useVoiceRecording\", {\n    enumerable: true,\n    get: function () {\n      return useVoiceRecording;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoAv = require(_dependencyMap[1], \"expo-av\");\n  var _expoFileSystem = require(_dependencyMap[2], \"expo-file-system\");\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  const useVoiceRecording = () => {\n    const [isRecording, setIsRecording] = (0, _react.useState)(false);\n    const [isTranscribing, setIsTranscribing] = (0, _react.useState)(false);\n    const recordingRef = (0, _react.useRef)(null);\n    const startRecording = async () => {\n      try {\n        console.log('üéôÔ∏è Requesting permissions...');\n        const permission = await _expoAv.Audio.requestPermissionsAsync();\n        if (permission.status !== 'granted') {\n          console.error('‚ùå Permission denied');\n          return false;\n        }\n        await _expoAv.Audio.setAudioModeAsync({\n          allowsRecordingIOS: true,\n          playsInSilentModeIOS: true\n        });\n        console.log('üéôÔ∏è Starting recording...');\n        const {\n          recording\n        } = await _expoAv.Audio.Recording.createAsync(_expoAv.Audio.RecordingOptionsPresets.HIGH_QUALITY);\n        recordingRef.current = recording;\n        setIsRecording(true);\n        console.log('‚úÖ Recording started');\n        return true;\n      } catch (err) {\n        console.error('‚ùå Failed to start recording', err);\n        return false;\n      }\n    };\n    const stopRecording = async () => {\n      if (!recordingRef.current) {\n        return null;\n      }\n      try {\n        console.log('üõë Stopping recording...');\n        setIsRecording(false);\n        await recordingRef.current.stopAndUnloadAsync();\n        await _expoAv.Audio.setAudioModeAsync({\n          allowsRecordingIOS: false\n        });\n        const uri = recordingRef.current.getURI();\n        recordingRef.current = null;\n        console.log('‚úÖ Recording stopped:', uri);\n        return uri;\n      } catch (err) {\n        console.error('‚ùå Failed to stop recording', err);\n        return null;\n      }\n    };\n    const transcribeAudio = async (audioUri, backendUrl) => {\n      if (!audioUri) return null;\n      setIsTranscribing(true);\n      try {\n        console.log('üìù Transcribing audio...');\n\n        // Create form data\n        const formData = new FormData();\n\n        // Read file and create blob\n        const fileInfo = await FileSystem.getInfoAsync(audioUri);\n        if (!fileInfo.exists) {\n          throw new Error('Audio file not found');\n        }\n\n        // For web, we need to handle differently\n        if (Platform.default.OS === 'web') {\n          const response = await fetch(audioUri);\n          const blob = await response.blob();\n          formData.append('file', blob, 'audio.m4a');\n        } else {\n          // For mobile\n          formData.append('file', {\n            uri: audioUri,\n            type: 'audio/m4a',\n            name: 'audio.m4a'\n          });\n        }\n\n        // Upload to backend\n        const response = await fetch(`${backendUrl}/api/transcribe`, {\n          method: 'POST',\n          body: formData\n        });\n        if (!response.ok) {\n          throw new Error(`Transcription failed: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log('‚úÖ Transcribed:', data.text);\n        return data.text;\n      } catch (error) {\n        console.error('‚ùå Transcription error:', error);\n        return null;\n      } finally {\n        setIsTranscribing(false);\n      }\n    };\n    return {\n      isRecording,\n      isTranscribing,\n      startRecording,\n      stopRecording,\n      transcribeAudio\n    };\n  };\n});","lineCount":143,"map":[[27,2,6,0,"Object"],[27,8,6,0],[27,9,6,0,"defineProperty"],[27,23,6,0],[27,24,6,0,"exports"],[27,31,6,0],[28,4,6,0,"enumerable"],[28,14,6,0],[29,4,6,0,"get"],[29,7,6,0],[29,18,6,0,"get"],[29,19,6,0],[30,6,6,0],[30,13,6,0,"useVoiceRecording"],[30,30,6,0],[31,4,6,0],[32,2,6,0],[33,2,1,0],[33,6,1,0,"_react"],[33,12,1,0],[33,15,1,0,"require"],[33,22,1,0],[33,23,1,0,"_dependencyMap"],[33,37,1,0],[34,2,2,0],[34,6,2,0,"_expoAv"],[34,13,2,0],[34,16,2,0,"require"],[34,23,2,0],[34,24,2,0,"_dependencyMap"],[34,38,2,0],[35,2,3,0],[35,6,3,0,"_expoFileSystem"],[35,21,3,0],[35,24,3,0,"require"],[35,31,3,0],[35,32,3,0,"_dependencyMap"],[35,46,3,0],[36,2,3,0],[36,6,3,0,"FileSystem"],[36,16,3,0],[36,19,3,0,"_interopNamespace"],[36,36,3,0],[36,37,3,0,"_expoFileSystem"],[36,52,3,0],[37,2,3,47],[37,6,3,47,"_reactNativeWebDistExportsPlatform"],[37,40,3,47],[37,43,3,47,"require"],[37,50,3,47],[37,51,3,47,"_dependencyMap"],[37,65,3,47],[38,2,3,47],[38,6,3,47,"Platform"],[38,14,3,47],[38,17,3,47,"_interopDefault"],[38,32,3,47],[38,33,3,47,"_reactNativeWebDistExportsPlatform"],[38,67,3,47],[39,2,6,7],[39,8,6,13,"useVoiceRecording"],[39,25,6,30],[39,28,6,33,"useVoiceRecording"],[39,29,6,33],[39,34,6,39],[40,4,7,2],[40,10,7,8],[40,11,7,9,"isRecording"],[40,22,7,20],[40,24,7,22,"setIsRecording"],[40,38,7,36],[40,39,7,37],[40,42,7,40],[40,46,7,40,"useState"],[40,52,7,48],[40,53,7,48,"useState"],[40,61,7,48],[40,63,7,49],[40,68,7,54],[40,69,7,55],[41,4,8,2],[41,10,8,8],[41,11,8,9,"isTranscribing"],[41,25,8,23],[41,27,8,25,"setIsTranscribing"],[41,44,8,42],[41,45,8,43],[41,48,8,46],[41,52,8,46,"useState"],[41,58,8,54],[41,59,8,54,"useState"],[41,67,8,54],[41,69,8,55],[41,74,8,60],[41,75,8,61],[42,4,9,2],[42,10,9,8,"recordingRef"],[42,22,9,20],[42,25,9,23],[42,29,9,23,"useRef"],[42,35,9,29],[42,36,9,29,"useRef"],[42,42,9,29],[42,44,9,54],[42,48,9,58],[42,49,9,59],[43,4,11,2],[43,10,11,8,"startRecording"],[43,24,11,22],[43,27,11,25],[43,33,11,25,"startRecording"],[43,34,11,25],[43,39,11,37],[44,6,12,4],[44,10,12,8],[45,8,13,6,"console"],[45,15,13,13],[45,16,13,14,"log"],[45,19,13,17],[45,20,13,18],[45,51,13,49],[45,52,13,50],[46,8,14,6],[46,14,14,12,"permission"],[46,24,14,22],[46,27,14,25],[46,33,14,31,"Audio"],[46,40,14,36],[46,41,14,36,"Audio"],[46,46,14,36],[46,47,14,37,"requestPermissionsAsync"],[46,70,14,60],[46,71,14,61],[46,72,14,62],[47,8,16,6],[47,12,16,10,"permission"],[47,22,16,20],[47,23,16,21,"status"],[47,29,16,27],[47,34,16,32],[47,43,16,41],[47,45,16,43],[48,10,17,8,"console"],[48,17,17,15],[48,18,17,16,"error"],[48,23,17,21],[48,24,17,22],[48,45,17,43],[48,46,17,44],[49,10,18,8],[49,17,18,15],[49,22,18,20],[50,8,19,6],[51,8,21,6],[51,14,21,12,"Audio"],[51,21,21,17],[51,22,21,17,"Audio"],[51,27,21,17],[51,28,21,18,"setAudioModeAsync"],[51,45,21,35],[51,46,21,36],[52,10,22,8,"allowsRecordingIOS"],[52,28,22,26],[52,30,22,28],[52,34,22,32],[53,10,23,8,"playsInSilentModeIOS"],[53,30,23,28],[53,32,23,30],[54,8,24,6],[54,9,24,7],[54,10,24,8],[55,8,26,6,"console"],[55,15,26,13],[55,16,26,14,"log"],[55,19,26,17],[55,20,26,18],[55,47,26,45],[55,48,26,46],[56,8,27,6],[56,14,27,12],[57,10,27,14,"recording"],[58,8,27,24],[58,9,27,25],[58,12,27,28],[58,18,27,34,"Audio"],[58,25,27,39],[58,26,27,39,"Audio"],[58,31,27,39],[58,32,27,40,"Recording"],[58,41,27,49],[58,42,27,50,"createAsync"],[58,53,27,61],[58,54,28,8,"Audio"],[58,61,28,13],[58,62,28,13,"Audio"],[58,67,28,13],[58,68,28,14,"RecordingOptionsPresets"],[58,91,28,37],[58,92,28,38,"HIGH_QUALITY"],[58,104,29,6],[58,105,29,7],[59,8,31,6,"recordingRef"],[59,20,31,18],[59,21,31,19,"current"],[59,28,31,26],[59,31,31,29,"recording"],[59,40,31,38],[60,8,32,6,"setIsRecording"],[60,22,32,20],[60,23,32,21],[60,27,32,25],[60,28,32,26],[61,8,33,6,"console"],[61,15,33,13],[61,16,33,14,"log"],[61,19,33,17],[61,20,33,18],[61,41,33,39],[61,42,33,40],[62,8,34,6],[62,15,34,13],[62,19,34,17],[63,6,35,4],[63,7,35,5],[63,8,35,6],[63,15,35,13,"err"],[63,18,35,16],[63,20,35,18],[64,8,36,6,"console"],[64,15,36,13],[64,16,36,14,"error"],[64,21,36,19],[64,22,36,20],[64,51,36,49],[64,53,36,51,"err"],[64,56,36,54],[64,57,36,55],[65,8,37,6],[65,15,37,13],[65,20,37,18],[66,6,38,4],[67,4,39,2],[67,5,39,3],[68,4,41,2],[68,10,41,8,"stopRecording"],[68,23,41,21],[68,26,41,24],[68,32,41,24,"stopRecording"],[68,33,41,24],[68,38,41,36],[69,6,42,4],[69,10,42,8],[69,11,42,9,"recordingRef"],[69,23,42,21],[69,24,42,22,"current"],[69,31,42,29],[69,33,42,31],[70,8,43,6],[70,15,43,13],[70,19,43,17],[71,6,44,4],[72,6,46,4],[72,10,46,8],[73,8,47,6,"console"],[73,15,47,13],[73,16,47,14,"log"],[73,19,47,17],[73,20,47,18],[73,46,47,44],[73,47,47,45],[74,8,48,6,"setIsRecording"],[74,22,48,20],[74,23,48,21],[74,28,48,26],[74,29,48,27],[75,8,49,6],[75,14,49,12,"recordingRef"],[75,26,49,24],[75,27,49,25,"current"],[75,34,49,32],[75,35,49,33,"stopAndUnloadAsync"],[75,53,49,51],[75,54,49,52],[75,55,49,53],[76,8,50,6],[76,14,50,12,"Audio"],[76,21,50,17],[76,22,50,17,"Audio"],[76,27,50,17],[76,28,50,18,"setAudioModeAsync"],[76,45,50,35],[76,46,50,36],[77,10,51,8,"allowsRecordingIOS"],[77,28,51,26],[77,30,51,28],[78,8,52,6],[78,9,52,7],[78,10,52,8],[79,8,54,6],[79,14,54,12,"uri"],[79,17,54,15],[79,20,54,18,"recordingRef"],[79,32,54,30],[79,33,54,31,"current"],[79,40,54,38],[79,41,54,39,"getURI"],[79,47,54,45],[79,48,54,46],[79,49,54,47],[80,8,55,6,"recordingRef"],[80,20,55,18],[80,21,55,19,"current"],[80,28,55,26],[80,31,55,29],[80,35,55,33],[81,8,57,6,"console"],[81,15,57,13],[81,16,57,14,"log"],[81,19,57,17],[81,20,57,18],[81,42,57,40],[81,44,57,42,"uri"],[81,47,57,45],[81,48,57,46],[82,8,58,6],[82,15,58,13,"uri"],[82,18,58,16],[83,6,59,4],[83,7,59,5],[83,8,59,6],[83,15,59,13,"err"],[83,18,59,16],[83,20,59,18],[84,8,60,6,"console"],[84,15,60,13],[84,16,60,14,"error"],[84,21,60,19],[84,22,60,20],[84,50,60,48],[84,52,60,50,"err"],[84,55,60,53],[84,56,60,54],[85,8,61,6],[85,15,61,13],[85,19,61,17],[86,6,62,4],[87,4,63,2],[87,5,63,3],[88,4,65,2],[88,10,65,8,"transcribeAudio"],[88,25,65,23],[88,28,65,26],[88,34,65,26,"transcribeAudio"],[88,35,65,33,"audioUri"],[88,43,65,49],[88,45,65,51,"backendUrl"],[88,55,65,69],[88,60,65,98],[89,6,66,4],[89,10,66,8],[89,11,66,9,"audioUri"],[89,19,66,17],[89,21,66,19],[89,28,66,26],[89,32,66,30],[90,6,68,4,"setIsTranscribing"],[90,23,68,21],[90,24,68,22],[90,28,68,26],[90,29,68,27],[91,6,70,4],[91,10,70,8],[92,8,71,6,"console"],[92,15,71,13],[92,16,71,14,"log"],[92,19,71,17],[92,20,71,18],[92,46,71,44],[92,47,71,45],[94,8,73,6],[95,8,74,6],[95,14,74,12,"formData"],[95,22,74,20],[95,25,74,23],[95,29,74,27,"FormData"],[95,37,74,35],[95,38,74,36],[95,39,74,37],[97,8,76,6],[98,8,77,6],[98,14,77,12,"fileInfo"],[98,22,77,20],[98,25,77,23],[98,31,77,29,"FileSystem"],[98,41,77,39],[98,42,77,40,"getInfoAsync"],[98,54,77,52],[98,55,77,53,"audioUri"],[98,63,77,61],[98,64,77,62],[99,8,78,6],[99,12,78,10],[99,13,78,11,"fileInfo"],[99,21,78,19],[99,22,78,20,"exists"],[99,28,78,26],[99,30,78,28],[100,10,79,8],[100,16,79,14],[100,20,79,18,"Error"],[100,25,79,23],[100,26,79,24],[100,48,79,46],[100,49,79,47],[101,8,80,6],[103,8,82,6],[104,8,83,6],[104,12,83,10,"Platform"],[104,20,83,18],[104,21,83,18,"default"],[104,28,83,18],[104,29,83,19,"OS"],[104,31,83,21],[104,36,83,26],[104,41,83,31],[104,43,83,33],[105,10,84,8],[105,16,84,14,"response"],[105,24,84,22],[105,27,84,25],[105,33,84,31,"fetch"],[105,38,84,36],[105,39,84,37,"audioUri"],[105,47,84,45],[105,48,84,46],[106,10,85,8],[106,16,85,14,"blob"],[106,20,85,18],[106,23,85,21],[106,29,85,27,"response"],[106,37,85,35],[106,38,85,36,"blob"],[106,42,85,40],[106,43,85,41],[106,44,85,42],[107,10,86,8,"formData"],[107,18,86,16],[107,19,86,17,"append"],[107,25,86,23],[107,26,86,24],[107,32,86,30],[107,34,86,32,"blob"],[107,38,86,36],[107,40,86,38],[107,51,86,49],[107,52,86,50],[108,8,87,6],[108,9,87,7],[108,15,87,13],[109,10,88,8],[110,10,89,8,"formData"],[110,18,89,16],[110,19,89,17,"append"],[110,25,89,23],[110,26,89,24],[110,32,89,30],[110,34,89,32],[111,12,90,10,"uri"],[111,15,90,13],[111,17,90,15,"audioUri"],[111,25,90,23],[112,12,91,10,"type"],[112,16,91,14],[112,18,91,16],[112,29,91,27],[113,12,92,10,"name"],[113,16,92,14],[113,18,92,16],[114,10,93,8],[114,11,93,16],[114,12,93,17],[115,8,94,6],[117,8,96,6],[118,8,97,6],[118,14,97,12,"response"],[118,22,97,20],[118,25,97,23],[118,31,97,29,"fetch"],[118,36,97,34],[118,37,97,35],[118,40,97,38,"backendUrl"],[118,50,97,48],[118,67,97,65],[118,69,97,67],[119,10,98,8,"method"],[119,16,98,14],[119,18,98,16],[119,24,98,22],[120,10,99,8,"body"],[120,14,99,12],[120,16,99,14,"formData"],[121,8,100,6],[121,9,100,7],[121,10,100,8],[122,8,102,6],[122,12,102,10],[122,13,102,11,"response"],[122,21,102,19],[122,22,102,20,"ok"],[122,24,102,22],[122,26,102,24],[123,10,103,8],[123,16,103,14],[123,20,103,18,"Error"],[123,25,103,23],[123,26,103,24],[123,51,103,49,"response"],[123,59,103,57],[123,60,103,58,"status"],[123,66,103,64],[123,68,103,66],[123,69,103,67],[124,8,104,6],[125,8,106,6],[125,14,106,12,"data"],[125,18,106,16],[125,21,106,19],[125,27,106,25,"response"],[125,35,106,33],[125,36,106,34,"json"],[125,40,106,38],[125,41,106,39],[125,42,106,40],[126,8,107,6,"console"],[126,15,107,13],[126,16,107,14,"log"],[126,19,107,17],[126,20,107,18],[126,36,107,34],[126,38,107,36,"data"],[126,42,107,40],[126,43,107,41,"text"],[126,47,107,45],[126,48,107,46],[127,8,109,6],[127,15,109,13,"data"],[127,19,109,17],[127,20,109,18,"text"],[127,24,109,22],[128,6,110,4],[128,7,110,5],[128,8,110,6],[128,15,110,13,"error"],[128,20,110,18],[128,22,110,20],[129,8,111,6,"console"],[129,15,111,13],[129,16,111,14,"error"],[129,21,111,19],[129,22,111,20],[129,46,111,44],[129,48,111,46,"error"],[129,53,111,51],[129,54,111,52],[130,8,112,6],[130,15,112,13],[130,19,112,17],[131,6,113,4],[131,7,113,5],[131,16,113,14],[132,8,114,6,"setIsTranscribing"],[132,25,114,23],[132,26,114,24],[132,31,114,29],[132,32,114,30],[133,6,115,4],[134,4,116,2],[134,5,116,3],[135,4,118,2],[135,11,118,9],[136,6,119,4,"isRecording"],[136,17,119,15],[137,6,120,4,"isTranscribing"],[137,20,120,18],[138,6,121,4,"startRecording"],[138,20,121,18],[139,6,122,4,"stopRecording"],[139,19,122,17],[140,6,123,4,"transcribeAudio"],[141,4,124,2],[141,5,124,3],[142,2,125,0],[142,3,125,1],[143,0,125,2],[143,3]],"functionMap":{"names":["<global>","useVoiceRecording","startRecording","stopRecording","transcribeAudio"],"mappings":"AAA;iCCK;yBCK;GD4B;wBEE;GFsB;0BGE;GHmD;CDS"},"hasCjsExports":false},"type":"js/module"}]}