{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-av","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":42},"end":{"line":2,"column":32,"index":74}}],"key":"VxVG0TWBdB+Oc1qOQ32HKtN+H5M=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useVoiceRecording\", {\n    enumerable: true,\n    get: function () {\n      return useVoiceRecording;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoAv = require(_dependencyMap[1], \"expo-av\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  const useVoiceRecording = () => {\n    const [isRecording, setIsRecording] = (0, _react.useState)(false);\n    const [isTranscribing, setIsTranscribing] = (0, _react.useState)(false);\n    const recordingRef = (0, _react.useRef)(null);\n    const startRecording = async () => {\n      try {\n        // Stop any existing recording first\n        if (recordingRef.current) {\n          try {\n            await recordingRef.current.stopAndUnloadAsync();\n          } catch (e) {\n            console.log('Cleaning up previous recording');\n          }\n          recordingRef.current = null;\n        }\n        console.log('üéôÔ∏è Requesting permissions...');\n        const permission = await _expoAv.Audio.requestPermissionsAsync();\n        if (permission.status !== 'granted') {\n          console.error('‚ùå Permission denied');\n          return false;\n        }\n        await _expoAv.Audio.setAudioModeAsync({\n          allowsRecordingIOS: true,\n          playsInSilentModeIOS: true\n        });\n        console.log('üéôÔ∏è Starting recording...');\n        const {\n          recording\n        } = await _expoAv.Audio.Recording.createAsync(_expoAv.Audio.RecordingOptionsPresets.HIGH_QUALITY);\n        recordingRef.current = recording;\n        setIsRecording(true);\n        console.log('‚úÖ Recording started');\n        return true;\n      } catch (err) {\n        console.error('‚ùå Failed to start recording', err);\n        return false;\n      }\n    };\n    const stopRecording = async () => {\n      if (!recordingRef.current) {\n        return null;\n      }\n      try {\n        console.log('üõë Stopping recording...');\n        setIsRecording(false);\n        await recordingRef.current.stopAndUnloadAsync();\n        await _expoAv.Audio.setAudioModeAsync({\n          allowsRecordingIOS: false\n        });\n        const uri = recordingRef.current.getURI();\n        recordingRef.current = null;\n        console.log('‚úÖ Recording stopped:', uri);\n        return uri;\n      } catch (err) {\n        console.error('‚ùå Failed to stop recording', err);\n        return null;\n      }\n    };\n    const transcribeAudio = async (audioUri, backendUrl) => {\n      if (!audioUri) return null;\n      setIsTranscribing(true);\n      try {\n        console.log('üìù Transcribing audio...');\n\n        // Create form data\n        const formData = new FormData();\n\n        // For web, we need to handle differently\n        if (Platform.default.OS === 'web') {\n          const response = await fetch(audioUri);\n          const blob = await response.blob();\n          formData.append('file', blob, 'audio.m4a');\n        } else {\n          // For mobile - use direct file URI\n          formData.append('file', {\n            uri: audioUri,\n            type: 'audio/m4a',\n            name: 'audio.m4a'\n          });\n        }\n\n        // Upload to backend\n        const response = await fetch(`${backendUrl}/api/transcribe`, {\n          method: 'POST',\n          body: formData\n        });\n        if (!response.ok) {\n          throw new Error(`Transcription failed: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log('‚úÖ Transcribed:', data.text);\n        return data.text;\n      } catch (error) {\n        console.error('‚ùå Transcription error:', error);\n        return null;\n      } finally {\n        setIsTranscribing(false);\n      }\n    };\n    return {\n      isRecording,\n      isTranscribing,\n      startRecording,\n      stopRecording,\n      transcribeAudio\n    };\n  };\n});","lineCount":129,"map":[[12,2,6,0,"Object"],[12,8,6,0],[12,9,6,0,"defineProperty"],[12,23,6,0],[12,24,6,0,"exports"],[12,31,6,0],[13,4,6,0,"enumerable"],[13,14,6,0],[14,4,6,0,"get"],[14,7,6,0],[14,18,6,0,"get"],[14,19,6,0],[15,6,6,0],[15,13,6,0,"useVoiceRecording"],[15,30,6,0],[16,4,6,0],[17,2,6,0],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_expoAv"],[19,13,2,0],[19,16,2,0,"require"],[19,23,2,0],[19,24,2,0,"_dependencyMap"],[19,38,2,0],[20,2,2,32],[20,6,2,32,"_reactNativeWebDistExportsPlatform"],[20,40,2,32],[20,43,2,32,"require"],[20,50,2,32],[20,51,2,32,"_dependencyMap"],[20,65,2,32],[21,2,2,32],[21,6,2,32,"Platform"],[21,14,2,32],[21,17,2,32,"_interopDefault"],[21,32,2,32],[21,33,2,32,"_reactNativeWebDistExportsPlatform"],[21,67,2,32],[22,2,6,7],[22,8,6,13,"useVoiceRecording"],[22,25,6,30],[22,28,6,33,"useVoiceRecording"],[22,29,6,33],[22,34,6,39],[23,4,7,2],[23,10,7,8],[23,11,7,9,"isRecording"],[23,22,7,20],[23,24,7,22,"setIsRecording"],[23,38,7,36],[23,39,7,37],[23,42,7,40],[23,46,7,40,"useState"],[23,52,7,48],[23,53,7,48,"useState"],[23,61,7,48],[23,63,7,49],[23,68,7,54],[23,69,7,55],[24,4,8,2],[24,10,8,8],[24,11,8,9,"isTranscribing"],[24,25,8,23],[24,27,8,25,"setIsTranscribing"],[24,44,8,42],[24,45,8,43],[24,48,8,46],[24,52,8,46,"useState"],[24,58,8,54],[24,59,8,54,"useState"],[24,67,8,54],[24,69,8,55],[24,74,8,60],[24,75,8,61],[25,4,9,2],[25,10,9,8,"recordingRef"],[25,22,9,20],[25,25,9,23],[25,29,9,23,"useRef"],[25,35,9,29],[25,36,9,29,"useRef"],[25,42,9,29],[25,44,9,54],[25,48,9,58],[25,49,9,59],[26,4,11,2],[26,10,11,8,"startRecording"],[26,24,11,22],[26,27,11,25],[26,33,11,25,"startRecording"],[26,34,11,25],[26,39,11,37],[27,6,12,4],[27,10,12,8],[28,8,13,6],[29,8,14,6],[29,12,14,10,"recordingRef"],[29,24,14,22],[29,25,14,23,"current"],[29,32,14,30],[29,34,14,32],[30,10,15,8],[30,14,15,12],[31,12,16,10],[31,18,16,16,"recordingRef"],[31,30,16,28],[31,31,16,29,"current"],[31,38,16,36],[31,39,16,37,"stopAndUnloadAsync"],[31,57,16,55],[31,58,16,56],[31,59,16,57],[32,10,17,8],[32,11,17,9],[32,12,17,10],[32,19,17,17,"e"],[32,20,17,18],[32,22,17,20],[33,12,18,10,"console"],[33,19,18,17],[33,20,18,18,"log"],[33,23,18,21],[33,24,18,22],[33,56,18,54],[33,57,18,55],[34,10,19,8],[35,10,20,8,"recordingRef"],[35,22,20,20],[35,23,20,21,"current"],[35,30,20,28],[35,33,20,31],[35,37,20,35],[36,8,21,6],[37,8,23,6,"console"],[37,15,23,13],[37,16,23,14,"log"],[37,19,23,17],[37,20,23,18],[37,51,23,49],[37,52,23,50],[38,8,24,6],[38,14,24,12,"permission"],[38,24,24,22],[38,27,24,25],[38,33,24,31,"Audio"],[38,40,24,36],[38,41,24,36,"Audio"],[38,46,24,36],[38,47,24,37,"requestPermissionsAsync"],[38,70,24,60],[38,71,24,61],[38,72,24,62],[39,8,26,6],[39,12,26,10,"permission"],[39,22,26,20],[39,23,26,21,"status"],[39,29,26,27],[39,34,26,32],[39,43,26,41],[39,45,26,43],[40,10,27,8,"console"],[40,17,27,15],[40,18,27,16,"error"],[40,23,27,21],[40,24,27,22],[40,45,27,43],[40,46,27,44],[41,10,28,8],[41,17,28,15],[41,22,28,20],[42,8,29,6],[43,8,31,6],[43,14,31,12,"Audio"],[43,21,31,17],[43,22,31,17,"Audio"],[43,27,31,17],[43,28,31,18,"setAudioModeAsync"],[43,45,31,35],[43,46,31,36],[44,10,32,8,"allowsRecordingIOS"],[44,28,32,26],[44,30,32,28],[44,34,32,32],[45,10,33,8,"playsInSilentModeIOS"],[45,30,33,28],[45,32,33,30],[46,8,34,6],[46,9,34,7],[46,10,34,8],[47,8,36,6,"console"],[47,15,36,13],[47,16,36,14,"log"],[47,19,36,17],[47,20,36,18],[47,47,36,45],[47,48,36,46],[48,8,37,6],[48,14,37,12],[49,10,37,14,"recording"],[50,8,37,24],[50,9,37,25],[50,12,37,28],[50,18,37,34,"Audio"],[50,25,37,39],[50,26,37,39,"Audio"],[50,31,37,39],[50,32,37,40,"Recording"],[50,41,37,49],[50,42,37,50,"createAsync"],[50,53,37,61],[50,54,38,8,"Audio"],[50,61,38,13],[50,62,38,13,"Audio"],[50,67,38,13],[50,68,38,14,"RecordingOptionsPresets"],[50,91,38,37],[50,92,38,38,"HIGH_QUALITY"],[50,104,39,6],[50,105,39,7],[51,8,41,6,"recordingRef"],[51,20,41,18],[51,21,41,19,"current"],[51,28,41,26],[51,31,41,29,"recording"],[51,40,41,38],[52,8,42,6,"setIsRecording"],[52,22,42,20],[52,23,42,21],[52,27,42,25],[52,28,42,26],[53,8,43,6,"console"],[53,15,43,13],[53,16,43,14,"log"],[53,19,43,17],[53,20,43,18],[53,41,43,39],[53,42,43,40],[54,8,44,6],[54,15,44,13],[54,19,44,17],[55,6,45,4],[55,7,45,5],[55,8,45,6],[55,15,45,13,"err"],[55,18,45,16],[55,20,45,18],[56,8,46,6,"console"],[56,15,46,13],[56,16,46,14,"error"],[56,21,46,19],[56,22,46,20],[56,51,46,49],[56,53,46,51,"err"],[56,56,46,54],[56,57,46,55],[57,8,47,6],[57,15,47,13],[57,20,47,18],[58,6,48,4],[59,4,49,2],[59,5,49,3],[60,4,51,2],[60,10,51,8,"stopRecording"],[60,23,51,21],[60,26,51,24],[60,32,51,24,"stopRecording"],[60,33,51,24],[60,38,51,36],[61,6,52,4],[61,10,52,8],[61,11,52,9,"recordingRef"],[61,23,52,21],[61,24,52,22,"current"],[61,31,52,29],[61,33,52,31],[62,8,53,6],[62,15,53,13],[62,19,53,17],[63,6,54,4],[64,6,56,4],[64,10,56,8],[65,8,57,6,"console"],[65,15,57,13],[65,16,57,14,"log"],[65,19,57,17],[65,20,57,18],[65,46,57,44],[65,47,57,45],[66,8,58,6,"setIsRecording"],[66,22,58,20],[66,23,58,21],[66,28,58,26],[66,29,58,27],[67,8,59,6],[67,14,59,12,"recordingRef"],[67,26,59,24],[67,27,59,25,"current"],[67,34,59,32],[67,35,59,33,"stopAndUnloadAsync"],[67,53,59,51],[67,54,59,52],[67,55,59,53],[68,8,60,6],[68,14,60,12,"Audio"],[68,21,60,17],[68,22,60,17,"Audio"],[68,27,60,17],[68,28,60,18,"setAudioModeAsync"],[68,45,60,35],[68,46,60,36],[69,10,61,8,"allowsRecordingIOS"],[69,28,61,26],[69,30,61,28],[70,8,62,6],[70,9,62,7],[70,10,62,8],[71,8,64,6],[71,14,64,12,"uri"],[71,17,64,15],[71,20,64,18,"recordingRef"],[71,32,64,30],[71,33,64,31,"current"],[71,40,64,38],[71,41,64,39,"getURI"],[71,47,64,45],[71,48,64,46],[71,49,64,47],[72,8,65,6,"recordingRef"],[72,20,65,18],[72,21,65,19,"current"],[72,28,65,26],[72,31,65,29],[72,35,65,33],[73,8,67,6,"console"],[73,15,67,13],[73,16,67,14,"log"],[73,19,67,17],[73,20,67,18],[73,42,67,40],[73,44,67,42,"uri"],[73,47,67,45],[73,48,67,46],[74,8,68,6],[74,15,68,13,"uri"],[74,18,68,16],[75,6,69,4],[75,7,69,5],[75,8,69,6],[75,15,69,13,"err"],[75,18,69,16],[75,20,69,18],[76,8,70,6,"console"],[76,15,70,13],[76,16,70,14,"error"],[76,21,70,19],[76,22,70,20],[76,50,70,48],[76,52,70,50,"err"],[76,55,70,53],[76,56,70,54],[77,8,71,6],[77,15,71,13],[77,19,71,17],[78,6,72,4],[79,4,73,2],[79,5,73,3],[80,4,75,2],[80,10,75,8,"transcribeAudio"],[80,25,75,23],[80,28,75,26],[80,34,75,26,"transcribeAudio"],[80,35,75,33,"audioUri"],[80,43,75,49],[80,45,75,51,"backendUrl"],[80,55,75,69],[80,60,75,98],[81,6,76,4],[81,10,76,8],[81,11,76,9,"audioUri"],[81,19,76,17],[81,21,76,19],[81,28,76,26],[81,32,76,30],[82,6,78,4,"setIsTranscribing"],[82,23,78,21],[82,24,78,22],[82,28,78,26],[82,29,78,27],[83,6,80,4],[83,10,80,8],[84,8,81,6,"console"],[84,15,81,13],[84,16,81,14,"log"],[84,19,81,17],[84,20,81,18],[84,46,81,44],[84,47,81,45],[86,8,83,6],[87,8,84,6],[87,14,84,12,"formData"],[87,22,84,20],[87,25,84,23],[87,29,84,27,"FormData"],[87,37,84,35],[87,38,84,36],[87,39,84,37],[89,8,86,6],[90,8,87,6],[90,12,87,10,"Platform"],[90,20,87,18],[90,21,87,18,"default"],[90,28,87,18],[90,29,87,19,"OS"],[90,31,87,21],[90,36,87,26],[90,41,87,31],[90,43,87,33],[91,10,88,8],[91,16,88,14,"response"],[91,24,88,22],[91,27,88,25],[91,33,88,31,"fetch"],[91,38,88,36],[91,39,88,37,"audioUri"],[91,47,88,45],[91,48,88,46],[92,10,89,8],[92,16,89,14,"blob"],[92,20,89,18],[92,23,89,21],[92,29,89,27,"response"],[92,37,89,35],[92,38,89,36,"blob"],[92,42,89,40],[92,43,89,41],[92,44,89,42],[93,10,90,8,"formData"],[93,18,90,16],[93,19,90,17,"append"],[93,25,90,23],[93,26,90,24],[93,32,90,30],[93,34,90,32,"blob"],[93,38,90,36],[93,40,90,38],[93,51,90,49],[93,52,90,50],[94,8,91,6],[94,9,91,7],[94,15,91,13],[95,10,92,8],[96,10,93,8,"formData"],[96,18,93,16],[96,19,93,17,"append"],[96,25,93,23],[96,26,93,24],[96,32,93,30],[96,34,93,32],[97,12,94,10,"uri"],[97,15,94,13],[97,17,94,15,"audioUri"],[97,25,94,23],[98,12,95,10,"type"],[98,16,95,14],[98,18,95,16],[98,29,95,27],[99,12,96,10,"name"],[99,16,96,14],[99,18,96,16],[100,10,97,8],[100,11,97,16],[100,12,97,17],[101,8,98,6],[103,8,100,6],[104,8,101,6],[104,14,101,12,"response"],[104,22,101,20],[104,25,101,23],[104,31,101,29,"fetch"],[104,36,101,34],[104,37,101,35],[104,40,101,38,"backendUrl"],[104,50,101,48],[104,67,101,65],[104,69,101,67],[105,10,102,8,"method"],[105,16,102,14],[105,18,102,16],[105,24,102,22],[106,10,103,8,"body"],[106,14,103,12],[106,16,103,14,"formData"],[107,8,104,6],[107,9,104,7],[107,10,104,8],[108,8,106,6],[108,12,106,10],[108,13,106,11,"response"],[108,21,106,19],[108,22,106,20,"ok"],[108,24,106,22],[108,26,106,24],[109,10,107,8],[109,16,107,14],[109,20,107,18,"Error"],[109,25,107,23],[109,26,107,24],[109,51,107,49,"response"],[109,59,107,57],[109,60,107,58,"status"],[109,66,107,64],[109,68,107,66],[109,69,107,67],[110,8,108,6],[111,8,110,6],[111,14,110,12,"data"],[111,18,110,16],[111,21,110,19],[111,27,110,25,"response"],[111,35,110,33],[111,36,110,34,"json"],[111,40,110,38],[111,41,110,39],[111,42,110,40],[112,8,111,6,"console"],[112,15,111,13],[112,16,111,14,"log"],[112,19,111,17],[112,20,111,18],[112,36,111,34],[112,38,111,36,"data"],[112,42,111,40],[112,43,111,41,"text"],[112,47,111,45],[112,48,111,46],[113,8,113,6],[113,15,113,13,"data"],[113,19,113,17],[113,20,113,18,"text"],[113,24,113,22],[114,6,114,4],[114,7,114,5],[114,8,114,6],[114,15,114,13,"error"],[114,20,114,18],[114,22,114,20],[115,8,115,6,"console"],[115,15,115,13],[115,16,115,14,"error"],[115,21,115,19],[115,22,115,20],[115,46,115,44],[115,48,115,46,"error"],[115,53,115,51],[115,54,115,52],[116,8,116,6],[116,15,116,13],[116,19,116,17],[117,6,117,4],[117,7,117,5],[117,16,117,14],[118,8,118,6,"setIsTranscribing"],[118,25,118,23],[118,26,118,24],[118,31,118,29],[118,32,118,30],[119,6,119,4],[120,4,120,2],[120,5,120,3],[121,4,122,2],[121,11,122,9],[122,6,123,4,"isRecording"],[122,17,123,15],[123,6,124,4,"isTranscribing"],[123,20,124,18],[124,6,125,4,"startRecording"],[124,20,125,18],[125,6,126,4,"stopRecording"],[125,19,126,17],[126,6,127,4,"transcribeAudio"],[127,4,128,2],[127,5,128,3],[128,2,129,0],[128,3,129,1],[129,0,129,2],[129,3]],"functionMap":{"names":["<global>","useVoiceRecording","startRecording","stopRecording","transcribeAudio"],"mappings":"AAA;iCCK;yBCK;GDsC;wBEE;GFsB;0BGE;GH6C;CDS"},"hasCjsExports":false},"type":"js/module"}]}