{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-av","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":42},"end":{"line":2,"column":32,"index":74}}],"key":"VxVG0TWBdB+Oc1qOQ32HKtN+H5M=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":75},"end":{"line":3,"column":47,"index":122}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useVoiceRecording\", {\n    enumerable: true,\n    get: function () {\n      return useVoiceRecording;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoAv = require(_dependencyMap[1], \"expo-av\");\n  var _expoFileSystem = require(_dependencyMap[2], \"expo-file-system\");\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  const useVoiceRecording = () => {\n    _s();\n    const [isRecording, setIsRecording] = (0, _react.useState)(false);\n    const [isTranscribing, setIsTranscribing] = (0, _react.useState)(false);\n    const recordingRef = (0, _react.useRef)(null);\n    const startRecording = async () => {\n      try {\n        console.log('üéôÔ∏è Requesting permissions...');\n        const permission = await _expoAv.Audio.requestPermissionsAsync();\n        if (permission.status !== 'granted') {\n          console.error('‚ùå Permission denied');\n          return false;\n        }\n        await _expoAv.Audio.setAudioModeAsync({\n          allowsRecordingIOS: true,\n          playsInSilentModeIOS: true\n        });\n        console.log('üéôÔ∏è Starting recording...');\n        const {\n          recording\n        } = await _expoAv.Audio.Recording.createAsync(_expoAv.Audio.RecordingOptionsPresets.HIGH_QUALITY);\n        recordingRef.current = recording;\n        setIsRecording(true);\n        console.log('‚úÖ Recording started');\n        return true;\n      } catch (err) {\n        console.error('‚ùå Failed to start recording', err);\n        return false;\n      }\n    };\n    const stopRecording = async () => {\n      if (!recordingRef.current) {\n        return null;\n      }\n      try {\n        console.log('üõë Stopping recording...');\n        setIsRecording(false);\n        await recordingRef.current.stopAndUnloadAsync();\n        await _expoAv.Audio.setAudioModeAsync({\n          allowsRecordingIOS: false\n        });\n        const uri = recordingRef.current.getURI();\n        recordingRef.current = null;\n        console.log('‚úÖ Recording stopped:', uri);\n        return uri;\n      } catch (err) {\n        console.error('‚ùå Failed to stop recording', err);\n        return null;\n      }\n    };\n    const transcribeAudio = async (audioUri, backendUrl) => {\n      if (!audioUri) return null;\n      setIsTranscribing(true);\n      try {\n        console.log('üìù Transcribing audio...');\n\n        // Create form data\n        const formData = new FormData();\n\n        // Read file and create blob\n        const fileInfo = await FileSystem.getInfoAsync(audioUri);\n        if (!fileInfo.exists) {\n          throw new Error('Audio file not found');\n        }\n\n        // For web, we need to handle differently\n        if (Platform.default.OS === 'web') {\n          const response = await fetch(audioUri);\n          const blob = await response.blob();\n          formData.append('file', blob, 'audio.m4a');\n        } else {\n          // For mobile\n          formData.append('file', {\n            uri: audioUri,\n            type: 'audio/m4a',\n            name: 'audio.m4a'\n          });\n        }\n\n        // Upload to backend\n        const response = await fetch(`${backendUrl}/api/transcribe`, {\n          method: 'POST',\n          body: formData\n        });\n        if (!response.ok) {\n          throw new Error(`Transcription failed: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log('‚úÖ Transcribed:', data.text);\n        return data.text;\n      } catch (error) {\n        console.error('‚ùå Transcription error:', error);\n        return null;\n      } finally {\n        setIsTranscribing(false);\n      }\n    };\n    return {\n      isRecording,\n      isTranscribing,\n      startRecording,\n      stopRecording,\n      transcribeAudio\n    };\n  };\n  _s(useVoiceRecording, \"ytDptreoH0nW5qkuO30J+liBzgI=\");\n});","lineCount":146,"map":[[28,2,6,0,"Object"],[28,8,6,0],[28,9,6,0,"defineProperty"],[28,23,6,0],[28,24,6,0,"exports"],[28,31,6,0],[29,4,6,0,"enumerable"],[29,14,6,0],[30,4,6,0,"get"],[30,7,6,0],[30,18,6,0,"get"],[30,19,6,0],[31,6,6,0],[31,13,6,0,"useVoiceRecording"],[31,30,6,0],[32,4,6,0],[33,2,6,0],[34,2,1,0],[34,6,1,0,"_react"],[34,12,1,0],[34,15,1,0,"require"],[34,22,1,0],[34,23,1,0,"_dependencyMap"],[34,37,1,0],[35,2,2,0],[35,6,2,0,"_expoAv"],[35,13,2,0],[35,16,2,0,"require"],[35,23,2,0],[35,24,2,0,"_dependencyMap"],[35,38,2,0],[36,2,3,0],[36,6,3,0,"_expoFileSystem"],[36,21,3,0],[36,24,3,0,"require"],[36,31,3,0],[36,32,3,0,"_dependencyMap"],[36,46,3,0],[37,2,3,0],[37,6,3,0,"FileSystem"],[37,16,3,0],[37,19,3,0,"_interopNamespace"],[37,36,3,0],[37,37,3,0,"_expoFileSystem"],[37,52,3,0],[38,2,3,47],[38,6,3,47,"_reactNativeWebDistExportsPlatform"],[38,40,3,47],[38,43,3,47,"require"],[38,50,3,47],[38,51,3,47,"_dependencyMap"],[38,65,3,47],[39,2,3,47],[39,6,3,47,"Platform"],[39,14,3,47],[39,17,3,47,"_interopDefault"],[39,32,3,47],[39,33,3,47,"_reactNativeWebDistExportsPlatform"],[39,67,3,47],[40,2,6,7],[40,8,6,13,"useVoiceRecording"],[40,25,6,30],[40,28,6,33,"useVoiceRecording"],[40,29,6,33],[40,34,6,39],[41,4,6,39,"_s"],[41,6,6,39],[42,4,7,2],[42,10,7,8],[42,11,7,9,"isRecording"],[42,22,7,20],[42,24,7,22,"setIsRecording"],[42,38,7,36],[42,39,7,37],[42,42,7,40],[42,46,7,40,"useState"],[42,52,7,48],[42,53,7,48,"useState"],[42,61,7,48],[42,63,7,49],[42,68,7,54],[42,69,7,55],[43,4,8,2],[43,10,8,8],[43,11,8,9,"isTranscribing"],[43,25,8,23],[43,27,8,25,"setIsTranscribing"],[43,44,8,42],[43,45,8,43],[43,48,8,46],[43,52,8,46,"useState"],[43,58,8,54],[43,59,8,54,"useState"],[43,67,8,54],[43,69,8,55],[43,74,8,60],[43,75,8,61],[44,4,9,2],[44,10,9,8,"recordingRef"],[44,22,9,20],[44,25,9,23],[44,29,9,23,"useRef"],[44,35,9,29],[44,36,9,29,"useRef"],[44,42,9,29],[44,44,9,54],[44,48,9,58],[44,49,9,59],[45,4,11,2],[45,10,11,8,"startRecording"],[45,24,11,22],[45,27,11,25],[45,33,11,25,"startRecording"],[45,34,11,25],[45,39,11,37],[46,6,12,4],[46,10,12,8],[47,8,13,6,"console"],[47,15,13,13],[47,16,13,14,"log"],[47,19,13,17],[47,20,13,18],[47,51,13,49],[47,52,13,50],[48,8,14,6],[48,14,14,12,"permission"],[48,24,14,22],[48,27,14,25],[48,33,14,31,"Audio"],[48,40,14,36],[48,41,14,36,"Audio"],[48,46,14,36],[48,47,14,37,"requestPermissionsAsync"],[48,70,14,60],[48,71,14,61],[48,72,14,62],[49,8,16,6],[49,12,16,10,"permission"],[49,22,16,20],[49,23,16,21,"status"],[49,29,16,27],[49,34,16,32],[49,43,16,41],[49,45,16,43],[50,10,17,8,"console"],[50,17,17,15],[50,18,17,16,"error"],[50,23,17,21],[50,24,17,22],[50,45,17,43],[50,46,17,44],[51,10,18,8],[51,17,18,15],[51,22,18,20],[52,8,19,6],[53,8,21,6],[53,14,21,12,"Audio"],[53,21,21,17],[53,22,21,17,"Audio"],[53,27,21,17],[53,28,21,18,"setAudioModeAsync"],[53,45,21,35],[53,46,21,36],[54,10,22,8,"allowsRecordingIOS"],[54,28,22,26],[54,30,22,28],[54,34,22,32],[55,10,23,8,"playsInSilentModeIOS"],[55,30,23,28],[55,32,23,30],[56,8,24,6],[56,9,24,7],[56,10,24,8],[57,8,26,6,"console"],[57,15,26,13],[57,16,26,14,"log"],[57,19,26,17],[57,20,26,18],[57,47,26,45],[57,48,26,46],[58,8,27,6],[58,14,27,12],[59,10,27,14,"recording"],[60,8,27,24],[60,9,27,25],[60,12,27,28],[60,18,27,34,"Audio"],[60,25,27,39],[60,26,27,39,"Audio"],[60,31,27,39],[60,32,27,40,"Recording"],[60,41,27,49],[60,42,27,50,"createAsync"],[60,53,27,61],[60,54,28,8,"Audio"],[60,61,28,13],[60,62,28,13,"Audio"],[60,67,28,13],[60,68,28,14,"RecordingOptionsPresets"],[60,91,28,37],[60,92,28,38,"HIGH_QUALITY"],[60,104,29,6],[60,105,29,7],[61,8,31,6,"recordingRef"],[61,20,31,18],[61,21,31,19,"current"],[61,28,31,26],[61,31,31,29,"recording"],[61,40,31,38],[62,8,32,6,"setIsRecording"],[62,22,32,20],[62,23,32,21],[62,27,32,25],[62,28,32,26],[63,8,33,6,"console"],[63,15,33,13],[63,16,33,14,"log"],[63,19,33,17],[63,20,33,18],[63,41,33,39],[63,42,33,40],[64,8,34,6],[64,15,34,13],[64,19,34,17],[65,6,35,4],[65,7,35,5],[65,8,35,6],[65,15,35,13,"err"],[65,18,35,16],[65,20,35,18],[66,8,36,6,"console"],[66,15,36,13],[66,16,36,14,"error"],[66,21,36,19],[66,22,36,20],[66,51,36,49],[66,53,36,51,"err"],[66,56,36,54],[66,57,36,55],[67,8,37,6],[67,15,37,13],[67,20,37,18],[68,6,38,4],[69,4,39,2],[69,5,39,3],[70,4,41,2],[70,10,41,8,"stopRecording"],[70,23,41,21],[70,26,41,24],[70,32,41,24,"stopRecording"],[70,33,41,24],[70,38,41,36],[71,6,42,4],[71,10,42,8],[71,11,42,9,"recordingRef"],[71,23,42,21],[71,24,42,22,"current"],[71,31,42,29],[71,33,42,31],[72,8,43,6],[72,15,43,13],[72,19,43,17],[73,6,44,4],[74,6,46,4],[74,10,46,8],[75,8,47,6,"console"],[75,15,47,13],[75,16,47,14,"log"],[75,19,47,17],[75,20,47,18],[75,46,47,44],[75,47,47,45],[76,8,48,6,"setIsRecording"],[76,22,48,20],[76,23,48,21],[76,28,48,26],[76,29,48,27],[77,8,49,6],[77,14,49,12,"recordingRef"],[77,26,49,24],[77,27,49,25,"current"],[77,34,49,32],[77,35,49,33,"stopAndUnloadAsync"],[77,53,49,51],[77,54,49,52],[77,55,49,53],[78,8,50,6],[78,14,50,12,"Audio"],[78,21,50,17],[78,22,50,17,"Audio"],[78,27,50,17],[78,28,50,18,"setAudioModeAsync"],[78,45,50,35],[78,46,50,36],[79,10,51,8,"allowsRecordingIOS"],[79,28,51,26],[79,30,51,28],[80,8,52,6],[80,9,52,7],[80,10,52,8],[81,8,54,6],[81,14,54,12,"uri"],[81,17,54,15],[81,20,54,18,"recordingRef"],[81,32,54,30],[81,33,54,31,"current"],[81,40,54,38],[81,41,54,39,"getURI"],[81,47,54,45],[81,48,54,46],[81,49,54,47],[82,8,55,6,"recordingRef"],[82,20,55,18],[82,21,55,19,"current"],[82,28,55,26],[82,31,55,29],[82,35,55,33],[83,8,57,6,"console"],[83,15,57,13],[83,16,57,14,"log"],[83,19,57,17],[83,20,57,18],[83,42,57,40],[83,44,57,42,"uri"],[83,47,57,45],[83,48,57,46],[84,8,58,6],[84,15,58,13,"uri"],[84,18,58,16],[85,6,59,4],[85,7,59,5],[85,8,59,6],[85,15,59,13,"err"],[85,18,59,16],[85,20,59,18],[86,8,60,6,"console"],[86,15,60,13],[86,16,60,14,"error"],[86,21,60,19],[86,22,60,20],[86,50,60,48],[86,52,60,50,"err"],[86,55,60,53],[86,56,60,54],[87,8,61,6],[87,15,61,13],[87,19,61,17],[88,6,62,4],[89,4,63,2],[89,5,63,3],[90,4,65,2],[90,10,65,8,"transcribeAudio"],[90,25,65,23],[90,28,65,26],[90,34,65,26,"transcribeAudio"],[90,35,65,33,"audioUri"],[90,43,65,49],[90,45,65,51,"backendUrl"],[90,55,65,69],[90,60,65,98],[91,6,66,4],[91,10,66,8],[91,11,66,9,"audioUri"],[91,19,66,17],[91,21,66,19],[91,28,66,26],[91,32,66,30],[92,6,68,4,"setIsTranscribing"],[92,23,68,21],[92,24,68,22],[92,28,68,26],[92,29,68,27],[93,6,70,4],[93,10,70,8],[94,8,71,6,"console"],[94,15,71,13],[94,16,71,14,"log"],[94,19,71,17],[94,20,71,18],[94,46,71,44],[94,47,71,45],[96,8,73,6],[97,8,74,6],[97,14,74,12,"formData"],[97,22,74,20],[97,25,74,23],[97,29,74,27,"FormData"],[97,37,74,35],[97,38,74,36],[97,39,74,37],[99,8,76,6],[100,8,77,6],[100,14,77,12,"fileInfo"],[100,22,77,20],[100,25,77,23],[100,31,77,29,"FileSystem"],[100,41,77,39],[100,42,77,40,"getInfoAsync"],[100,54,77,52],[100,55,77,53,"audioUri"],[100,63,77,61],[100,64,77,62],[101,8,78,6],[101,12,78,10],[101,13,78,11,"fileInfo"],[101,21,78,19],[101,22,78,20,"exists"],[101,28,78,26],[101,30,78,28],[102,10,79,8],[102,16,79,14],[102,20,79,18,"Error"],[102,25,79,23],[102,26,79,24],[102,48,79,46],[102,49,79,47],[103,8,80,6],[105,8,82,6],[106,8,83,6],[106,12,83,10,"Platform"],[106,20,83,18],[106,21,83,18,"default"],[106,28,83,18],[106,29,83,19,"OS"],[106,31,83,21],[106,36,83,26],[106,41,83,31],[106,43,83,33],[107,10,84,8],[107,16,84,14,"response"],[107,24,84,22],[107,27,84,25],[107,33,84,31,"fetch"],[107,38,84,36],[107,39,84,37,"audioUri"],[107,47,84,45],[107,48,84,46],[108,10,85,8],[108,16,85,14,"blob"],[108,20,85,18],[108,23,85,21],[108,29,85,27,"response"],[108,37,85,35],[108,38,85,36,"blob"],[108,42,85,40],[108,43,85,41],[108,44,85,42],[109,10,86,8,"formData"],[109,18,86,16],[109,19,86,17,"append"],[109,25,86,23],[109,26,86,24],[109,32,86,30],[109,34,86,32,"blob"],[109,38,86,36],[109,40,86,38],[109,51,86,49],[109,52,86,50],[110,8,87,6],[110,9,87,7],[110,15,87,13],[111,10,88,8],[112,10,89,8,"formData"],[112,18,89,16],[112,19,89,17,"append"],[112,25,89,23],[112,26,89,24],[112,32,89,30],[112,34,89,32],[113,12,90,10,"uri"],[113,15,90,13],[113,17,90,15,"audioUri"],[113,25,90,23],[114,12,91,10,"type"],[114,16,91,14],[114,18,91,16],[114,29,91,27],[115,12,92,10,"name"],[115,16,92,14],[115,18,92,16],[116,10,93,8],[116,11,93,16],[116,12,93,17],[117,8,94,6],[119,8,96,6],[120,8,97,6],[120,14,97,12,"response"],[120,22,97,20],[120,25,97,23],[120,31,97,29,"fetch"],[120,36,97,34],[120,37,97,35],[120,40,97,38,"backendUrl"],[120,50,97,48],[120,67,97,65],[120,69,97,67],[121,10,98,8,"method"],[121,16,98,14],[121,18,98,16],[121,24,98,22],[122,10,99,8,"body"],[122,14,99,12],[122,16,99,14,"formData"],[123,8,100,6],[123,9,100,7],[123,10,100,8],[124,8,102,6],[124,12,102,10],[124,13,102,11,"response"],[124,21,102,19],[124,22,102,20,"ok"],[124,24,102,22],[124,26,102,24],[125,10,103,8],[125,16,103,14],[125,20,103,18,"Error"],[125,25,103,23],[125,26,103,24],[125,51,103,49,"response"],[125,59,103,57],[125,60,103,58,"status"],[125,66,103,64],[125,68,103,66],[125,69,103,67],[126,8,104,6],[127,8,106,6],[127,14,106,12,"data"],[127,18,106,16],[127,21,106,19],[127,27,106,25,"response"],[127,35,106,33],[127,36,106,34,"json"],[127,40,106,38],[127,41,106,39],[127,42,106,40],[128,8,107,6,"console"],[128,15,107,13],[128,16,107,14,"log"],[128,19,107,17],[128,20,107,18],[128,36,107,34],[128,38,107,36,"data"],[128,42,107,40],[128,43,107,41,"text"],[128,47,107,45],[128,48,107,46],[129,8,109,6],[129,15,109,13,"data"],[129,19,109,17],[129,20,109,18,"text"],[129,24,109,22],[130,6,110,4],[130,7,110,5],[130,8,110,6],[130,15,110,13,"error"],[130,20,110,18],[130,22,110,20],[131,8,111,6,"console"],[131,15,111,13],[131,16,111,14,"error"],[131,21,111,19],[131,22,111,20],[131,46,111,44],[131,48,111,46,"error"],[131,53,111,51],[131,54,111,52],[132,8,112,6],[132,15,112,13],[132,19,112,17],[133,6,113,4],[133,7,113,5],[133,16,113,14],[134,8,114,6,"setIsTranscribing"],[134,25,114,23],[134,26,114,24],[134,31,114,29],[134,32,114,30],[135,6,115,4],[136,4,116,2],[136,5,116,3],[137,4,118,2],[137,11,118,9],[138,6,119,4,"isRecording"],[138,17,119,15],[139,6,120,4,"isTranscribing"],[139,20,120,18],[140,6,121,4,"startRecording"],[140,20,121,18],[141,6,122,4,"stopRecording"],[141,19,122,17],[142,6,123,4,"transcribeAudio"],[143,4,124,2],[143,5,124,3],[144,2,125,0],[144,3,125,1],[145,2,125,2,"_s"],[145,4,125,2],[145,5,6,13,"useVoiceRecording"],[145,22,6,30],[146,0,6,30],[146,3]],"functionMap":{"names":["<global>","useVoiceRecording","startRecording","stopRecording","transcribeAudio"],"mappings":"AAA;iCCK;yBCK;GD4B;wBEE;GFsB;0BGE;GHmD;CDS"},"hasCjsExports":false},"type":"js/module"}]}