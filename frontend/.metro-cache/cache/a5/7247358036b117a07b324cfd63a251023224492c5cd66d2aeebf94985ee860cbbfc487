{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-av","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":42},"end":{"line":2,"column":32,"index":74}}],"key":"VxVG0TWBdB+Oc1qOQ32HKtN+H5M=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useVoiceRecording\", {\n    enumerable: true,\n    get: function () {\n      return useVoiceRecording;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoAv = require(_dependencyMap[1], \"expo-av\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  const useVoiceRecording = () => {\n    _s();\n    const [isRecording, setIsRecording] = (0, _react.useState)(false);\n    const [isTranscribing, setIsTranscribing] = (0, _react.useState)(false);\n    const recordingRef = (0, _react.useRef)(null);\n    const startRecording = async () => {\n      try {\n        // Stop any existing recording first\n        if (recordingRef.current) {\n          try {\n            await recordingRef.current.stopAndUnloadAsync();\n          } catch (e) {\n            console.log('Cleaning up previous recording');\n          }\n          recordingRef.current = null;\n        }\n        console.log('üéôÔ∏è Requesting permissions...');\n        const permission = await _expoAv.Audio.requestPermissionsAsync();\n        if (permission.status !== 'granted') {\n          console.error('‚ùå Permission denied');\n          return false;\n        }\n        await _expoAv.Audio.setAudioModeAsync({\n          allowsRecordingIOS: true,\n          playsInSilentModeIOS: true\n        });\n        console.log('üéôÔ∏è Starting recording...');\n        const {\n          recording\n        } = await _expoAv.Audio.Recording.createAsync(_expoAv.Audio.RecordingOptionsPresets.HIGH_QUALITY);\n        recordingRef.current = recording;\n        setIsRecording(true);\n        console.log('‚úÖ Recording started');\n        return true;\n      } catch (err) {\n        console.error('‚ùå Failed to start recording', err);\n        return false;\n      }\n    };\n    const stopRecording = async () => {\n      if (!recordingRef.current) {\n        return null;\n      }\n      try {\n        console.log('üõë Stopping recording...');\n        setIsRecording(false);\n        await recordingRef.current.stopAndUnloadAsync();\n        await _expoAv.Audio.setAudioModeAsync({\n          allowsRecordingIOS: false\n        });\n        const uri = recordingRef.current.getURI();\n        recordingRef.current = null;\n        console.log('‚úÖ Recording stopped:', uri);\n        return uri;\n      } catch (err) {\n        console.error('‚ùå Failed to stop recording', err);\n        return null;\n      }\n    };\n    const transcribeAudio = async (audioUri, backendUrl) => {\n      if (!audioUri) return null;\n      setIsTranscribing(true);\n      try {\n        console.log('üìù Transcribing audio...');\n\n        // Create form data\n        const formData = new FormData();\n\n        // For web, we need to handle differently\n        if (Platform.default.OS === 'web') {\n          const response = await fetch(audioUri);\n          const blob = await response.blob();\n          formData.append('file', blob, 'audio.m4a');\n        } else {\n          // For mobile - use direct file URI\n          formData.append('file', {\n            uri: audioUri,\n            type: 'audio/m4a',\n            name: 'audio.m4a'\n          });\n        }\n\n        // Upload to backend\n        const response = await fetch(`${backendUrl}/api/transcribe`, {\n          method: 'POST',\n          body: formData\n        });\n        if (!response.ok) {\n          throw new Error(`Transcription failed: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log('‚úÖ Transcribed:', data.text);\n        return data.text;\n      } catch (error) {\n        console.error('‚ùå Transcription error:', error);\n        return null;\n      } finally {\n        setIsTranscribing(false);\n      }\n    };\n    return {\n      isRecording,\n      isTranscribing,\n      startRecording,\n      stopRecording,\n      transcribeAudio\n    };\n  };\n  _s(useVoiceRecording, \"ytDptreoH0nW5qkuO30J+liBzgI=\");\n});","lineCount":132,"map":[[13,2,6,0,"Object"],[13,8,6,0],[13,9,6,0,"defineProperty"],[13,23,6,0],[13,24,6,0,"exports"],[13,31,6,0],[14,4,6,0,"enumerable"],[14,14,6,0],[15,4,6,0,"get"],[15,7,6,0],[15,18,6,0,"get"],[15,19,6,0],[16,6,6,0],[16,13,6,0,"useVoiceRecording"],[16,30,6,0],[17,4,6,0],[18,2,6,0],[19,2,1,0],[19,6,1,0,"_react"],[19,12,1,0],[19,15,1,0,"require"],[19,22,1,0],[19,23,1,0,"_dependencyMap"],[19,37,1,0],[20,2,2,0],[20,6,2,0,"_expoAv"],[20,13,2,0],[20,16,2,0,"require"],[20,23,2,0],[20,24,2,0,"_dependencyMap"],[20,38,2,0],[21,2,2,32],[21,6,2,32,"_reactNativeWebDistExportsPlatform"],[21,40,2,32],[21,43,2,32,"require"],[21,50,2,32],[21,51,2,32,"_dependencyMap"],[21,65,2,32],[22,2,2,32],[22,6,2,32,"Platform"],[22,14,2,32],[22,17,2,32,"_interopDefault"],[22,32,2,32],[22,33,2,32,"_reactNativeWebDistExportsPlatform"],[22,67,2,32],[23,2,6,7],[23,8,6,13,"useVoiceRecording"],[23,25,6,30],[23,28,6,33,"useVoiceRecording"],[23,29,6,33],[23,34,6,39],[24,4,6,39,"_s"],[24,6,6,39],[25,4,7,2],[25,10,7,8],[25,11,7,9,"isRecording"],[25,22,7,20],[25,24,7,22,"setIsRecording"],[25,38,7,36],[25,39,7,37],[25,42,7,40],[25,46,7,40,"useState"],[25,52,7,48],[25,53,7,48,"useState"],[25,61,7,48],[25,63,7,49],[25,68,7,54],[25,69,7,55],[26,4,8,2],[26,10,8,8],[26,11,8,9,"isTranscribing"],[26,25,8,23],[26,27,8,25,"setIsTranscribing"],[26,44,8,42],[26,45,8,43],[26,48,8,46],[26,52,8,46,"useState"],[26,58,8,54],[26,59,8,54,"useState"],[26,67,8,54],[26,69,8,55],[26,74,8,60],[26,75,8,61],[27,4,9,2],[27,10,9,8,"recordingRef"],[27,22,9,20],[27,25,9,23],[27,29,9,23,"useRef"],[27,35,9,29],[27,36,9,29,"useRef"],[27,42,9,29],[27,44,9,54],[27,48,9,58],[27,49,9,59],[28,4,11,2],[28,10,11,8,"startRecording"],[28,24,11,22],[28,27,11,25],[28,33,11,25,"startRecording"],[28,34,11,25],[28,39,11,37],[29,6,12,4],[29,10,12,8],[30,8,13,6],[31,8,14,6],[31,12,14,10,"recordingRef"],[31,24,14,22],[31,25,14,23,"current"],[31,32,14,30],[31,34,14,32],[32,10,15,8],[32,14,15,12],[33,12,16,10],[33,18,16,16,"recordingRef"],[33,30,16,28],[33,31,16,29,"current"],[33,38,16,36],[33,39,16,37,"stopAndUnloadAsync"],[33,57,16,55],[33,58,16,56],[33,59,16,57],[34,10,17,8],[34,11,17,9],[34,12,17,10],[34,19,17,17,"e"],[34,20,17,18],[34,22,17,20],[35,12,18,10,"console"],[35,19,18,17],[35,20,18,18,"log"],[35,23,18,21],[35,24,18,22],[35,56,18,54],[35,57,18,55],[36,10,19,8],[37,10,20,8,"recordingRef"],[37,22,20,20],[37,23,20,21,"current"],[37,30,20,28],[37,33,20,31],[37,37,20,35],[38,8,21,6],[39,8,23,6,"console"],[39,15,23,13],[39,16,23,14,"log"],[39,19,23,17],[39,20,23,18],[39,51,23,49],[39,52,23,50],[40,8,24,6],[40,14,24,12,"permission"],[40,24,24,22],[40,27,24,25],[40,33,24,31,"Audio"],[40,40,24,36],[40,41,24,36,"Audio"],[40,46,24,36],[40,47,24,37,"requestPermissionsAsync"],[40,70,24,60],[40,71,24,61],[40,72,24,62],[41,8,26,6],[41,12,26,10,"permission"],[41,22,26,20],[41,23,26,21,"status"],[41,29,26,27],[41,34,26,32],[41,43,26,41],[41,45,26,43],[42,10,27,8,"console"],[42,17,27,15],[42,18,27,16,"error"],[42,23,27,21],[42,24,27,22],[42,45,27,43],[42,46,27,44],[43,10,28,8],[43,17,28,15],[43,22,28,20],[44,8,29,6],[45,8,31,6],[45,14,31,12,"Audio"],[45,21,31,17],[45,22,31,17,"Audio"],[45,27,31,17],[45,28,31,18,"setAudioModeAsync"],[45,45,31,35],[45,46,31,36],[46,10,32,8,"allowsRecordingIOS"],[46,28,32,26],[46,30,32,28],[46,34,32,32],[47,10,33,8,"playsInSilentModeIOS"],[47,30,33,28],[47,32,33,30],[48,8,34,6],[48,9,34,7],[48,10,34,8],[49,8,36,6,"console"],[49,15,36,13],[49,16,36,14,"log"],[49,19,36,17],[49,20,36,18],[49,47,36,45],[49,48,36,46],[50,8,37,6],[50,14,37,12],[51,10,37,14,"recording"],[52,8,37,24],[52,9,37,25],[52,12,37,28],[52,18,37,34,"Audio"],[52,25,37,39],[52,26,37,39,"Audio"],[52,31,37,39],[52,32,37,40,"Recording"],[52,41,37,49],[52,42,37,50,"createAsync"],[52,53,37,61],[52,54,38,8,"Audio"],[52,61,38,13],[52,62,38,13,"Audio"],[52,67,38,13],[52,68,38,14,"RecordingOptionsPresets"],[52,91,38,37],[52,92,38,38,"HIGH_QUALITY"],[52,104,39,6],[52,105,39,7],[53,8,41,6,"recordingRef"],[53,20,41,18],[53,21,41,19,"current"],[53,28,41,26],[53,31,41,29,"recording"],[53,40,41,38],[54,8,42,6,"setIsRecording"],[54,22,42,20],[54,23,42,21],[54,27,42,25],[54,28,42,26],[55,8,43,6,"console"],[55,15,43,13],[55,16,43,14,"log"],[55,19,43,17],[55,20,43,18],[55,41,43,39],[55,42,43,40],[56,8,44,6],[56,15,44,13],[56,19,44,17],[57,6,45,4],[57,7,45,5],[57,8,45,6],[57,15,45,13,"err"],[57,18,45,16],[57,20,45,18],[58,8,46,6,"console"],[58,15,46,13],[58,16,46,14,"error"],[58,21,46,19],[58,22,46,20],[58,51,46,49],[58,53,46,51,"err"],[58,56,46,54],[58,57,46,55],[59,8,47,6],[59,15,47,13],[59,20,47,18],[60,6,48,4],[61,4,49,2],[61,5,49,3],[62,4,51,2],[62,10,51,8,"stopRecording"],[62,23,51,21],[62,26,51,24],[62,32,51,24,"stopRecording"],[62,33,51,24],[62,38,51,36],[63,6,52,4],[63,10,52,8],[63,11,52,9,"recordingRef"],[63,23,52,21],[63,24,52,22,"current"],[63,31,52,29],[63,33,52,31],[64,8,53,6],[64,15,53,13],[64,19,53,17],[65,6,54,4],[66,6,56,4],[66,10,56,8],[67,8,57,6,"console"],[67,15,57,13],[67,16,57,14,"log"],[67,19,57,17],[67,20,57,18],[67,46,57,44],[67,47,57,45],[68,8,58,6,"setIsRecording"],[68,22,58,20],[68,23,58,21],[68,28,58,26],[68,29,58,27],[69,8,59,6],[69,14,59,12,"recordingRef"],[69,26,59,24],[69,27,59,25,"current"],[69,34,59,32],[69,35,59,33,"stopAndUnloadAsync"],[69,53,59,51],[69,54,59,52],[69,55,59,53],[70,8,60,6],[70,14,60,12,"Audio"],[70,21,60,17],[70,22,60,17,"Audio"],[70,27,60,17],[70,28,60,18,"setAudioModeAsync"],[70,45,60,35],[70,46,60,36],[71,10,61,8,"allowsRecordingIOS"],[71,28,61,26],[71,30,61,28],[72,8,62,6],[72,9,62,7],[72,10,62,8],[73,8,64,6],[73,14,64,12,"uri"],[73,17,64,15],[73,20,64,18,"recordingRef"],[73,32,64,30],[73,33,64,31,"current"],[73,40,64,38],[73,41,64,39,"getURI"],[73,47,64,45],[73,48,64,46],[73,49,64,47],[74,8,65,6,"recordingRef"],[74,20,65,18],[74,21,65,19,"current"],[74,28,65,26],[74,31,65,29],[74,35,65,33],[75,8,67,6,"console"],[75,15,67,13],[75,16,67,14,"log"],[75,19,67,17],[75,20,67,18],[75,42,67,40],[75,44,67,42,"uri"],[75,47,67,45],[75,48,67,46],[76,8,68,6],[76,15,68,13,"uri"],[76,18,68,16],[77,6,69,4],[77,7,69,5],[77,8,69,6],[77,15,69,13,"err"],[77,18,69,16],[77,20,69,18],[78,8,70,6,"console"],[78,15,70,13],[78,16,70,14,"error"],[78,21,70,19],[78,22,70,20],[78,50,70,48],[78,52,70,50,"err"],[78,55,70,53],[78,56,70,54],[79,8,71,6],[79,15,71,13],[79,19,71,17],[80,6,72,4],[81,4,73,2],[81,5,73,3],[82,4,75,2],[82,10,75,8,"transcribeAudio"],[82,25,75,23],[82,28,75,26],[82,34,75,26,"transcribeAudio"],[82,35,75,33,"audioUri"],[82,43,75,49],[82,45,75,51,"backendUrl"],[82,55,75,69],[82,60,75,98],[83,6,76,4],[83,10,76,8],[83,11,76,9,"audioUri"],[83,19,76,17],[83,21,76,19],[83,28,76,26],[83,32,76,30],[84,6,78,4,"setIsTranscribing"],[84,23,78,21],[84,24,78,22],[84,28,78,26],[84,29,78,27],[85,6,80,4],[85,10,80,8],[86,8,81,6,"console"],[86,15,81,13],[86,16,81,14,"log"],[86,19,81,17],[86,20,81,18],[86,46,81,44],[86,47,81,45],[88,8,83,6],[89,8,84,6],[89,14,84,12,"formData"],[89,22,84,20],[89,25,84,23],[89,29,84,27,"FormData"],[89,37,84,35],[89,38,84,36],[89,39,84,37],[91,8,86,6],[92,8,87,6],[92,12,87,10,"Platform"],[92,20,87,18],[92,21,87,18,"default"],[92,28,87,18],[92,29,87,19,"OS"],[92,31,87,21],[92,36,87,26],[92,41,87,31],[92,43,87,33],[93,10,88,8],[93,16,88,14,"response"],[93,24,88,22],[93,27,88,25],[93,33,88,31,"fetch"],[93,38,88,36],[93,39,88,37,"audioUri"],[93,47,88,45],[93,48,88,46],[94,10,89,8],[94,16,89,14,"blob"],[94,20,89,18],[94,23,89,21],[94,29,89,27,"response"],[94,37,89,35],[94,38,89,36,"blob"],[94,42,89,40],[94,43,89,41],[94,44,89,42],[95,10,90,8,"formData"],[95,18,90,16],[95,19,90,17,"append"],[95,25,90,23],[95,26,90,24],[95,32,90,30],[95,34,90,32,"blob"],[95,38,90,36],[95,40,90,38],[95,51,90,49],[95,52,90,50],[96,8,91,6],[96,9,91,7],[96,15,91,13],[97,10,92,8],[98,10,93,8,"formData"],[98,18,93,16],[98,19,93,17,"append"],[98,25,93,23],[98,26,93,24],[98,32,93,30],[98,34,93,32],[99,12,94,10,"uri"],[99,15,94,13],[99,17,94,15,"audioUri"],[99,25,94,23],[100,12,95,10,"type"],[100,16,95,14],[100,18,95,16],[100,29,95,27],[101,12,96,10,"name"],[101,16,96,14],[101,18,96,16],[102,10,97,8],[102,11,97,16],[102,12,97,17],[103,8,98,6],[105,8,100,6],[106,8,101,6],[106,14,101,12,"response"],[106,22,101,20],[106,25,101,23],[106,31,101,29,"fetch"],[106,36,101,34],[106,37,101,35],[106,40,101,38,"backendUrl"],[106,50,101,48],[106,67,101,65],[106,69,101,67],[107,10,102,8,"method"],[107,16,102,14],[107,18,102,16],[107,24,102,22],[108,10,103,8,"body"],[108,14,103,12],[108,16,103,14,"formData"],[109,8,104,6],[109,9,104,7],[109,10,104,8],[110,8,106,6],[110,12,106,10],[110,13,106,11,"response"],[110,21,106,19],[110,22,106,20,"ok"],[110,24,106,22],[110,26,106,24],[111,10,107,8],[111,16,107,14],[111,20,107,18,"Error"],[111,25,107,23],[111,26,107,24],[111,51,107,49,"response"],[111,59,107,57],[111,60,107,58,"status"],[111,66,107,64],[111,68,107,66],[111,69,107,67],[112,8,108,6],[113,8,110,6],[113,14,110,12,"data"],[113,18,110,16],[113,21,110,19],[113,27,110,25,"response"],[113,35,110,33],[113,36,110,34,"json"],[113,40,110,38],[113,41,110,39],[113,42,110,40],[114,8,111,6,"console"],[114,15,111,13],[114,16,111,14,"log"],[114,19,111,17],[114,20,111,18],[114,36,111,34],[114,38,111,36,"data"],[114,42,111,40],[114,43,111,41,"text"],[114,47,111,45],[114,48,111,46],[115,8,113,6],[115,15,113,13,"data"],[115,19,113,17],[115,20,113,18,"text"],[115,24,113,22],[116,6,114,4],[116,7,114,5],[116,8,114,6],[116,15,114,13,"error"],[116,20,114,18],[116,22,114,20],[117,8,115,6,"console"],[117,15,115,13],[117,16,115,14,"error"],[117,21,115,19],[117,22,115,20],[117,46,115,44],[117,48,115,46,"error"],[117,53,115,51],[117,54,115,52],[118,8,116,6],[118,15,116,13],[118,19,116,17],[119,6,117,4],[119,7,117,5],[119,16,117,14],[120,8,118,6,"setIsTranscribing"],[120,25,118,23],[120,26,118,24],[120,31,118,29],[120,32,118,30],[121,6,119,4],[122,4,120,2],[122,5,120,3],[123,4,122,2],[123,11,122,9],[124,6,123,4,"isRecording"],[124,17,123,15],[125,6,124,4,"isTranscribing"],[125,20,124,18],[126,6,125,4,"startRecording"],[126,20,125,18],[127,6,126,4,"stopRecording"],[127,19,126,17],[128,6,127,4,"transcribeAudio"],[129,4,128,2],[129,5,128,3],[130,2,129,0],[130,3,129,1],[131,2,129,2,"_s"],[131,4,129,2],[131,5,6,13,"useVoiceRecording"],[131,22,6,30],[132,0,6,30],[132,3]],"functionMap":{"names":["<global>","useVoiceRecording","startRecording","stopRecording","transcribeAudio"],"mappings":"AAA;iCCK;yBCK;GDsC;wBEE;GFsB;0BGE;GH6C;CDS"},"hasCjsExports":false},"type":"js/module"}]}